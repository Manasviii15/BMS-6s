(export (version "E")
  (design
    (source "BMS.kicad_sch")
    (date "2025-01-15")
    (tool "KiCad 7.0.11")
    (sheet (number "1") (name "Smart BMS Main Schematic") (tstamps "root")))
  (components
    (comp (ref "U1")
      (value "BQ76940")
      (description "6-15S Analog Front End IC Battery Monitor")
      (footprint "Package_QFN:QFN-44-1EP_7x7mm_P0.5mm_EP5.5x5.5mm")
      (libsource (lib "Texas_Instruments") (part "BQ76940"))
      (pins
        (pin (num "1") (name "VC1") (type "input"))
        (pin (num "2") (name "VC2") (type "input"))
        (pin (num "3") (name "VC3") (type "input"))
        (pin (num "4") (name "VC4") (type "input"))
        (pin (num "5") (name "VC5") (type "input"))
        (pin (num "6") (name "VC6") (type "input"))
        (pin (num "7") (name "VREF") (type "output"))
        (pin (num "8") (name "AVSS") (type "power_in"))
        (pin (num "9") (name "SDA") (type "BiDi"))
        (pin (num "10") (name "SCL") (type "input"))
        (pin (num "11") (name "ALERT") (type "output"))
        (pin (num "12") (name "DSG") (type "output"))
        (pin (num "13") (name "CHG") (type "output"))
        (pin (num "14-19") (name "BAL1-BAL6") (type "output"))
        (pin (num "20-22") (name "TS1-TS3") (type "input"))
        (pin (num "44") (name "DVSS") (type "power_in"))))
    (comp (ref "U2")
      (value "STM32G0B1RET6")
      (description "ARM Cortex-M0+ MCU 64MHz 512KB CAN-FD LQFP-64")
      (footprint "Package_QFP:LQFP-64_10x10mm_P0.5mm")
      (libsource (lib "STMicroelectronics") (part "STM32G0B1RET6"))
      (pins
        (pin (num "1") (name "VDDA") (type "power_in"))
        (pin (num "6") (name "PA0") (type "BiDi"))
        (pin (num "7") (name "PA1") (type "BiDi"))
        (pin (num "33") (name "PA9") (type "BiDi"))
        (pin (num "34") (name "PA10") (type "BiDi"))
        (pin (num "45") (name "PA11") (type "BiDi"))
        (pin (num "46") (name "PA12") (type "BiDi"))
        (pin (num "58") (name "PB6") (type "BiDi"))
        (pin (num "59") (name "PB7") (type "BiDi"))))
    (comp (ref "U3")
      (value "TJA1051T/3")
      (description "CAN Bus Transceiver 5Mbps 3.3V SO-8")
      (footprint "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm")
      (pins
        (pin (num "1") (name "TXD") (type "input"))
        (pin (num "4") (name "VSS") (type "power_in"))
        (pin (num "5") (name "VCC") (type "power_in"))
        (pin (num "6") (name "CANOB") (type "BiDi"))
        (pin (num "7") (name "CANOA") (type "BiDi"))
        (pin (num "8") (name "RXD") (type "output"))))
    (comp (ref "Q1") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A Rds=1.5mohm TO-220") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q2") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - DISCHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q3") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - DISCHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q4") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - DISCHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q5") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - CHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q6") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - CHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q7") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - CHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "Q8") (value "IRFB7537PBF") (description "N-Ch MOSFET 75V 195A - CHARGE parallel") (footprint "Package_TO_SOT_THT:TO-220-3_Vertical"))
    (comp (ref "R_SHUNT") (value "0.5mohm") (description "4-Terminal Shunt 0.5mOhm 100A Isabellenhuette IVY") (footprint "Resistor_SMD:R_4terminal_2512"))
    (comp (ref "F1") (value "100A/58V") (description "Fast-blow fuse 100A 58V automotive Littelfuse 0498100") (footprint "Fuse:Fuse_5x20mm_Horizontal"))
    (comp (ref "NTC1") (value "10k B3977") (description "NTC Thermistor 10kOhm cell area") (footprint "Sensor_Temperature:NTC_10k_Murata_NCU15WF104F60RC"))
    (comp (ref "NTC2") (value "10k B3977") (description "NTC Thermistor 10kOhm MOSFET area") (footprint "Sensor_Temperature:NTC_10k_Murata_NCU15WF104F60RC"))
    (comp (ref "NTC3") (value "10k B3977") (description "NTC Thermistor 10kOhm shunt area") (footprint "Sensor_Temperature:NTC_10k_Murata_NCU15WF104F60RC")))
  (nets
    (net (code "1") (name "+VPACK")
      (node (ref "F1") (pin "A"))
      (node (ref "Q1") (pin "D"))
      (node (ref "Q2") (pin "D"))
      (node (ref "Q3") (pin "D"))
      (node (ref "Q4") (pin "D")))
    (net (code "2") (name "GND_PWR")
      (node (ref "Q5") (pin "S"))
      (node (ref "Q6") (pin "S"))
      (node (ref "Q7") (pin "S"))
      (node (ref "Q8") (pin "S"))
      (node (ref "U7") (pin "GND"))
      (node (ref "U1") (pin "AVSS"))
      (node (ref "U1") (pin "DVSS")))
    (net (code "3") (name "+3V3")
      (node (ref "U7") (pin "OUT"))
      (node (ref "U2") (pin "VDD"))
      (node (ref "U3") (pin "VCC"))
      (node (ref "U4") (pin "VCC"))
      (node (ref "C20") (pin "1"))
      (node (ref "C21") (pin "1")))
    (net (code "4") (name "I2C_SDA")
      (node (ref "U1") (pin "SDA"))
      (node (ref "U2") (pin "PB7"))
      (node (ref "U4") (pin "SDA")))
    (net (code "5") (name "I2C_SCL")
      (node (ref "U1") (pin "SCL"))
      (node (ref "U2") (pin "PB6"))
      (node (ref "U4") (pin "SCL")))
    (net (code "6") (name "CAN_TX")
      (node (ref "U2") (pin "PA12"))
      (node (ref "U3") (pin "TXD")))
    (net (code "7") (name "CAN_RX")
      (node (ref "U2") (pin "PA11"))
      (node (ref "U3") (pin "RXD")))
    (net (code "8") (name "CANH")
      (node (ref "U3") (pin "CANOA"))
      (node (ref "R_T") (pin "1"))
      (node (ref "J2") (pin "1")))
    (net (code "9") (name "CANL")
      (node (ref "U3") (pin "CANOB"))
      (node (ref "R_T") (pin "2"))
      (node (ref "J2") (pin "2")))
    (net (code "10") (name "DSG_EN")
      (node (ref "U2") (pin "PB9"))
      (node (ref "U5") (pin "IN_DSG")))
    (net (code "11") (name "CHG_EN")
      (node (ref "U2") (pin "PB8"))
      (node (ref "U5") (pin "IN_CHG")))
    (net (code "12") (name "ISENSE_P")
      (node (ref "R_SHUNT") (pin "KP"))
      (node (ref "U6") (pin "IN+")))
    (net (code "13") (name "ISENSE_N")
      (node (ref "R_SHUNT") (pin "KN"))
      (node (ref "U6") (pin "IN-")))
    (net (code "14") (name "ISENSE_OUT")
      (node (ref "U6") (pin "OUT"))
      (node (ref "U2") (pin "PA0")))
    (net (code "15") (name "TS1")
      (node (ref "NTC1") (pin "1"))
      (node (ref "U1") (pin "TS1"))
      (node (ref "U2") (pin "PA1")))
    (net (code "16") (name "VC1")
      (node (ref "U1") (pin "VC1"))
      (node (ref "J_BAT") (pin "1")))
    (net (code "17") (name "VC2")
      (node (ref "U1") (pin "VC2"))
      (node (ref "J_BAT") (pin "2")))
    (net (code "18") (name "VC3")
      (node (ref "U1") (pin "VC3"))
      (node (ref "J_BAT") (pin "3")))
    (net (code "19") (name "VC4")
      (node (ref "U1") (pin "VC4"))
      (node (ref "J_BAT") (pin "4")))
    (net (code "20") (name "VC5")
      (node (ref "U1") (pin "VC5"))
      (node (ref "J_BAT") (pin "5")))
    (net (code "21") (name "VC6")
      (node (ref "U1") (pin "VC6"))
      (node (ref "J_BAT") (pin "6")))
    (net (code "22") (name "BAL1")
      (node (ref "U1") (pin "BAL1"))
      (node (ref "Q10") (pin "G")))
    (net (code "23") (name "ALERT")
      (node (ref "U1") (pin "ALERT"))
      (node (ref "U2") (pin "PE4")))
    (net (code "24") (name "PACK_OUT_P")
      (node (ref "Q5") (pin "D"))
      (node (ref "Q6") (pin "D"))
      (node (ref "J1") (pin "1")))
    (net (code "25") (name "FAULT_OUT")
      (node (ref "U2") (pin "PC13"))
      (node (ref "J3") (pin "3")))))
)
